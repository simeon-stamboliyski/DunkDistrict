{% extends 'base.html' %}
{% load static %}

{% block title %}Write a Review - DunkDistrict{% endblock %}

{% block content %}
{% load widget_tweaks %}
<!-- Page Header -->
<div class="page-header">
    <div class="container">
        <h1>Write a Review</h1>
        <p>Share your experience with other customers</p>
    </div>
</div>

<!-- Review Form Section -->
<div class="container section-padding">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Product Info -->
            <div class="card mb-4" style="border-radius: 12px; border: none; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                <div class="card-body p-4">
                    <div class="row align-items-center">
                        <div class="col-md-2">
                            <div class="product-image"
                                style="width: 80px; height: 80px; background: var(--light-gray); border-radius: 8px; background-size: cover; background-position: center;
                                        background-image: url(&quot;{% if product.picture %}{{ product.picture.url }}{% else %}{% static 'images/default_product.png' %}{% endif %}&quot;);">
                            </div>
                        </div>
                        <div class="col-md-10">
                            <h5 class="mb-1">{{ product.name }}</h5>
                            <p class="text-muted mb-0">You're reviewing this product</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Review Form -->
            <div class="form-container" id="reviewform">
                <div class="form-header">
                    <h2>Your Review</h2>
                    <p>Help other customers by sharing your honest feedback</p>
                </div>

                <form method="post">
                    {% csrf_token %}
                    {% if form.non_field_errors %}
                        <div class="alert alert-danger">{{ form.non_field_errors }}</div>
                    {% endif %}

                    <!-- Rating -->
                    <div class="form-group mb-3">
                        <label for="{{ form.rating.id_for_label }}" class="form-label">Overall Rating</label>
                        {{ form.rating }}
                        {{ form.rating.errors }}
                    </div>

                    <!-- Review Title -->
                    <div class="form-group">
                        <label class="form-label" for="{{ form.title.id_for_label }}">Review Title</label>
                        {{ form.title|add_class:"form-control-custom" }}
                        {{ form.title.errors }}
                    </div>

                    <!-- Comment -->
                    <div class="form-group">
                        <label class="form-label" for="{{ form.comment.id_for_label }}">Your Review</label>
                        {{ form.comment|add_class:"form-control-custom" }}
                        {{ form.comment.errors }}
                    </div>

                    <!-- Ownership Duration -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label" for="{{ form.ownership_duration.id_for_label }}">How long have you owned this product?</label>
                                {{ form.owned_duration|add_class:"form-control-custom" }}
                                {{ form.owned_duration.errors }}
                            </div>
                        </div>

                        <!-- Recommendation -->
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label" for="{{ form.recommendation.id_for_label }}">Would you recommend this product?</label>
                                {{ form.recommend|add_class:"form-control-custom" }}
                                {{ form.recommend.errors }}
                            </div>
                        </div>
                    </div>

                    <!-- Pros and Cons -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label" for="{{ form.pros.id_for_label }}">What did you like most? (Optional)</label>
                                {{ form.pros|add_class:"form-control-custom" }}
                                {{ form.pros.errors }}
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label" for="{{ form.cons.id_for_label }}">What could be improved? (Optional)</label>
                                {{ form.cons|add_class:"form-control-custom" }}
                                {{ form.cons.errors }}
                            </div>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <button type="submit" class="btn btn-primary-custom form-submit-btn">
                                <i class="fas fa-paper-plane me-2"></i>Submit Review
                            </button>
                        </div>
                        <div class="col-md-6" id="btp">
                            <a href="{% url 'products:product_detail' product.id %}" class="btn btn-outline-secondary w-100 py-3 text-center">
                                <i class="fas fa-arrow-left me-2"></i>Back to Product
                            </a>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>
{% endblock %}
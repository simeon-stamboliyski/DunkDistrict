{% extends 'base.html' %}
{% load static %}

{% block content %}

<!-- Page Header -->
<div class="page-header">
    <div class="container">
        <h1>Our Products</h1>
        <p>Find the perfect gear for your game</p>
    </div>
</div>

<!-- Products Section -->
<div class="container products-container">
    <div class="row">
        <!-- Sidebar Filters -->
        <div class="col-lg-3">
            <div class="filters-sidebar">
                <form method="GET" id="filtersForm">

                    <!-- Search Bar -->
                    <div class="search-bar mb-3">
                        <input 
                            type="text" 
                            name="q"
                            class="form-control" 
                            placeholder="Search products..."
                            value="{{ search_query }}">
                    </div>

                    <!-- Category Filter -->
                    <div class="filter-section mb-3">
                        <h5>Categories</h5>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="shoes" 
                                name="category" 
                                value="shoes"
                                {% if 'shoes' in selected_categories %}checked{% endif %}>
                            <label for="shoes">Basketball Shoes</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="apparel" 
                                name="category" 
                                value="apparel"
                                {% if 'apparel' in selected_categories %}checked{% endif %}>
                            <label for="apparel">Apparel</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="equipment" 
                                name="category" 
                                value="equipment"
                                {% if 'equipment' in selected_categories %}checked{% endif %}>
                            <label for="equipment">Equipment</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="accessories" 
                                name="category" 
                                value="accessories"
                                {% if 'accessories' in selected_categories %}checked{% endif %}>
                            <label for="accessories">Accessories</label>
                        </div>
                    </div>

                    <!-- Size Filter -->
                    <div class="filter-section mb-3">
                        <h5>Size</h5>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="xs" 
                                name="size" 
                                value="XS"
                                {% if 'XS' in selected_sizes %}checked{% endif %}>
                            <label for="xs">XS</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="s" 
                                name="size" 
                                value="S"
                                {% if 'S' in selected_sizes %}checked{% endif %}>
                            <label for="s">S</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="m" 
                                name="size" 
                                value="M"
                                {% if 'M' in selected_sizes %}checked{% endif %}>
                            <label for="m">M</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="l" 
                                name="size" 
                                value="L"
                                {% if 'L' in selected_sizes %}checked{% endif %}>
                            <label for="l">L</label>
                        </div>
                        <div class="filter-option">
                            <input 
                                type="checkbox" 
                                id="xl" 
                                name="size" 
                                value="XL"
                                {% if 'XL' in selected_sizes %}checked{% endif %}>
                            <label for="xl">XL</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="col-lg-9">
            <div class="products-grid">

                {% for product in products %}
                <div class="product-list-card card-hover">
                    <div class="product-list-image">
                        {% if product.picture %}
                            <img src="{{ product.picture.url }}" alt="{{ product.name }}">
                        {% else %}
                            <img src="{% static 'images/default_product.png' %}" alt="No Image">
                        {% endif %}
                    </div>
                    <div class="product-list-info">
                        <h5 class="product-list-name">{{ product.name }}</h5>
                        <div class="product-list-price">${{ product.price }}</div>
                        <a href="{% url 'products:product_detail' product.id %}" class="btn btn-primary-custom">View Product</a>
                    </div>
                </div>
                {% empty %}
                <p>No products found matching your filters.</p>
                {% endfor %}

            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('filtersForm').addEventListener('change', function() {
        this.submit();
    });
</script>

{% endblock %}